sudo: true
language: go

go:
  - 1.12.x

before_install:
  - if [ "$TRAVIS_OS_NAME" == "linux" ]; then sudo add-apt-repository -y ppa:mc3man/trusty-media; fi
  - if [ "$TRAVIS_OS_NAME" == "linux" ]; then sudo apt-get update; fi
  - if [ "$TRAVIS_OS_NAME" == "linux" ]; then sudo apt-get install -y ffmpeg; fi
  - ffmpeg -version || true
  - export GOPATH=$PWD/go-get-youtube
  - go get github.com/knadh/go-get-youtube
  - mv mv_files.sh go-get-youtube/bin
  - cd go-get-youtube/bin
  - go get -v golang.org/x/lint/golint

script:
  # Add more links later and commet out
  # 05-20-2019
  # Test Video
  - ./go-get-youtube -id=fZPgnFHeG3M -rename -mp3 || true
  - ./go-get-youtube -id=fZPgnFHeG3M -rename -mp3 || true
  - ./go-get-youtube -id=cN_DpYBzKso -itag 34 -rename -mp3 || true
  - ./go-get-youtube -id=fZPgnFHeG3M -itag 36 -rename -mp3 || true
  - ./go-get-youtube -id=fZPgnFHeG3M -itag 37 -rename -mp3 || true
  - ./go-get-youtube -id=fZPgnFHeG3M -itag 38 -rename -mp3 || true
  - ls
  - chmod +x mv_files.sh && ./mv_files.sh

# "GCS Interoperable Access Key ID"
# "GCS Interoperable Access Secret"
deploy:
  provider: gcs
  access_key_id: $GCS_IAK_ID 
  secret_access_key: $GCS_IAS 
  bucket: "GCS Bucket"
  local_dir: cait-music
  skip_cleanup: true
  acl: public-read